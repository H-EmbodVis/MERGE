<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="MERGE">
  <meta name="keywords" content="Unified, Depth Estimation, Text-to-Image">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MERGE</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>

  <!-- Merged styles for scrolling galleries -->
  <style>
      /* New full-screen landing section */
      .hero-landing {
          height: 100vh;
          width: 100%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          background-color: #f0f2f5;
          padding: 1rem 0;
          box-sizing: border-box;
          gap: 1.5rem; /* Space between galleries and title block */
      }

      .scroll-container {
          width: 100%;
          overflow: hidden;
          background: transparent;
          height: 28vh; /* **CHANGE**: Define height based on viewport height */
      }

      .scroll-grid {
          display: flex;
          width: max-content;
          height: 100%;
      }

      /* --- Image item styles (shared) --- */
      .comparison-item, .t2i-item {
          height: 100%; /* **CHANGE**: Height is now 100% of the container */
          aspect-ratio: 4/3; /* Width will be calculated based on height and aspect ratio */
          flex-shrink: 0;
          margin: 0 5px; /* Compressed margin */
          border-radius: 8px;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
          overflow: hidden;
      }

      /* --- Image comparison styles --- */
      .image-compare {
          position: relative;
          width: 100%;
          height: 100%;
          cursor: col-resize;
          background: #fff;
      }

      .image-compare > img {
          position: absolute; top: 0; left: 0; width: 100%; height: 100%;
          /* **REMOVED**: object-fit to prevent cropping */
      }

      .compare-image {
          clip-path: inset(0 50% 0 0); z-index: 1;
      }

      .divider {
          position: absolute; top: 0; bottom: 0; left: 50%; width: 2px; background-color: white; transform: translateX(-50%); pointer-events: none; z-index: 2;
      }

      .handle {
          position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 32px; height: 32px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.9); box-shadow: 0 0 8px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center;
      }

      .handle::before {
          content: "↔"; font-size: 14px; color: #333;
      }

      /* --- T2I Result styles --- */
      .t2i-item {
          position: relative;
          background: #fff;
      }

      .t2i-item img {
          width: 100%; height: 100%;
          transition: transform 0.3s ease;
          /* **REMOVED**: object-fit to prevent cropping */
      }

      .t2i-item:hover img {
          transform: scale(1.05);
      }

      .prompt-overlay {
          position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(25, 25, 25, 0.7); color: white; display: flex; justify-content: center; align-items: center; text-align: center; font-size: 13px; line-height: 1.4; padding: 15px; box-sizing: border-box; transform: translateY(-100%); transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94); pointer-events: none;
      }

      .t2i-item:hover .prompt-overlay {
          transform: translateY(0);
      }

      /* Override Bulma's hero padding for the title block */
      .hero-landing .hero.is-small .hero-body {
          padding: 0;
      }
  </style>

</head>
<body>

<!-- ============== PART 1: FULL-SCREEN LANDING PAGE ============== -->
<section class="hero-landing">

    <!-- Top Row: T2I Results -->
    <div class="scroll-container" id="t2i-container">
        <div class="scroll-grid" id="t2i-grid">
            <!-- T2I content is generated by JS -->
        </div>
    </div>

    <!-- Middle: Project Title, Authors, and Links -->
    <section class="hero is-small" style="background: transparent;">
        <div class="hero-body">
            <div class="container is-max-desktop">
                <div class="columns is-centered">
                    <div class="column has-text-centered">
                    <h1 class="title is-1 publication-title">More Than Generation: Unifying Generation and Depth Estimation via Text-to-Image Diffusion Models</h1>
                    <div class="is-size-5 publication-authors">
                        <span class="author-block"><a href="https://github.com/HongkLin?tab=repositories" target="_blank" rel="noopener noreferrer">Hongkai Lin</a>,</span>
                        <span class="author-block"><a href="https://scholar.google.com/citations?user=Tre69v0AAAAJ&hl=zh-CN" target="_blank" rel="noopener noreferrer">Dingkang Liang</a>,</span>
                        <span class="author-block"><a href=" " target="_blank" rel="noopener noreferrer">Mingyang Du</a>,</span>
                        <span class="author-block"><a href="https://scholar.google.com/citations?user=SWU7N_sAAAAJ&hl=en" target="_blank" rel="noopener noreferrer">Xin Zhou</a>,</span>
                        <span class="author-block"><a href="https://scholar.google.com/citations?user=UeltiQ4AAAAJ&hl=zh-CN" target="_blank" rel="noopener noreferrer">Xiang Bai</a><sup>†</sup></span>
                    </div>

                    <div class="is-size-5 publication-authors">
                        <span class="author-block">Huazhong University of Science & Technology</span>
                    </div>
                    <div class="is-size-5 publication-authors">
                        <span class="author-block"><sup>†</sup> Corresponding author.</span>
                    </div>

                    <div class="column has-text-centered">
                        <div class="publication-links">
                        <span class="link-block">
                            <a href="https://arxiv.org/abs/"
                            class="external-link button is-normal is-rounded is-dark" target="_blank" rel="noopener noreferrer">
                            <span class="icon"><i class="fas fa-file-pdf"></i></span>
                            <span>Paper</span>
                            </a>
                        </span>
                        <span class="link-block">
                            <a href="https://github.com/H-EmbodVis/MERGE"
                            class="external-link button is-normal is-rounded is-dark" target="_blank" rel="noopener noreferrer">
                            <span class="icon"><i class="fab fa-github"></i></span>
                            <span>Code</span>
                            </a>
                        </span>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Row: Image Comparison -->
    <div class="scroll-container" id="comparison-container">
        <div class="scroll-grid" id="comparison-grid">
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_1.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_1.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_3.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_3.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_4.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_4.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_5.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_5.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_6.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_6.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_7.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_7.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_8.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_8.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
            <div class="comparison-item"><div class="image-compare"><img src="static/images/dpt_images/cp_dpt_9.png" class="base-image" alt=""><img src="static/images/dpt_images/cp_rgb_9.png" class="compare-image" alt=""><div class="divider"><div class="handle"></div></div></div></div>
        </div>
    </div>

</section>
<!-- ============== END OF PART 1 ============== -->


<!-- ============== PART 2: SCROLLABLE CONTENT ============== -->
<script src="../../assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
    backgroundColor: '#fff',
    innerHTML: 'Back to Top',
    textColor: '#333'
  })
</script>
<style>
    #back-to-top {
      border: 1px solid #ccc;
      border-radius: 0;
      font-size: 15px;
      width: 100px;
      text-align: center;
      line-height: 30px;
      height: 30px;
    }
</style>

<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths has-text-centered">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
          Generative depth estimation methods leverage the rich visual priors stored in pre-trained text-to-image diffusion models, demonstrating astonishing zero-shot capability.
          However, parameter updates during training lead to catastrophic degradation in the image generation capability of the pre-trained model.
          We introduce MERGE, a unified model for image generation and depth estimation, starting from a fixed pre-trained text-to-image model.
          MERGE demonstrates that the pre-trained text-to-image model can do more than image generation but also expand to depth estimation effortlessly.
          Specifically, MERGE introduces a play-and-plug framework that enables seamless switching between image generation and depth estimation modes through simple and pluggable converters.
          Meanwhile, we propose a Group Reuse Mechanism to encourage parameter reuse and improve the utilization of the additional learnable parameter.
          MERGE unleashes the powerful depth estimation capability of the pre-trained text-to-image model while preserving its original image generation ability.
          Compared to other unified models for image generation and depth estimation, MERGE achieves state-of-the-art performance across multiple depth estimation benchmarks.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="hero is-small">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <h2 class="title is-3">Overview</h2>
      <div class="item" style="text-align: center; display: flex; flex-direction: column; align-items: center;">
        <img src="./static/images/overall.png" alt="MY ALT TEXT" style="aspect-ratio: 10 / 3; width: 90%;"/>
        <div class="content has-text-justified" style="text-align: center; width: 90%;">
          <p>
            In this work, to overcome the catastrophic degradation in the image generation capability of generative depth estimation methods, we present a simple and elegant play-and-plug framework.
            Without relying on large-scale data-driven training or complex architectural designs, our method expands the pre-trained text-to-image model with depth estimation capability by incorporating two core components: pluggable converters and the group reuse mechanism, while preserving its original image generation ability.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="hero is-small">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <h2 class="title is-3">Pipeline</h2>
      <div class="item" style="text-align: center;">
        <img src="static/images/merge_pipeline.png" alt="MY ALT TEXT" style="width: 90%;"/>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3">Experiments</h2>
          <div class="item">

              <div class="column is-center has-text-centered">
                <h3 class="title is-4">Zero-shot Affine-invariant Depth Estimation</h3>
                <img src="./static/images/depth_results.png"
                     class="interpolation-image"
                     alt="Interpolate start reference image."
                     style="width: 80%;"/>
              </div>

              <div class="column is-center has-text-centered">
                <h3 class="title is-4">Zero-shot Surface Normal Estimation </h3>
                <img src="./static/images/normal_results.png"
                     class="interpolation-image"
                     alt="Interpolate start reference image."
                     style="width: 80%;"
                />
              </div>
          </div>

      </div>
    </div>
  </div>
</section>


<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>
    @inproceedings{lin2025merge,
          title={More Than Generation: Unifying Generation and Depth Estimation via Text-to-Image Diffusion Models},
          author={Lin, Hongkai and Liang, Dingkang and Mingyang Du and Xin Zhou and Bai, Xiang},
          booktitle={Advances in Neural Information Processing Systems},
          year={2025},
    }
    </code></pre>
  </div>
</section>



<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <small><p>
            This website is licensed under a <a rel="license"
                                                href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p></small>
          <small><p>
            We sincerely appreciate Nerfies authors <a href="https://github.com/nerfies/nerfies.github.io"> for their awesome templates.
          </p></small>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- ============== END OF PART 2 ============== -->

<!-- Merged script for scrolling galleries -->
<script>
    document.addEventListener('DOMContentLoaded', function() {

        const t2iData = [
            { src: 'static/images/t2i_images/t2i_0.png', prompt: 'A cat holding a sign that says hello world' },
            { src: 'static/images/t2i_images/t2i_1.png', prompt: 'A cinematic shot of a raccoon astronaut in a futuristic city, neon lights, high detail.' },
            { src: 'static/images/t2i_images/t2i_2.png', prompt: 'Oil painting of a tranquil lake at sunrise, misty mountains in the background.' },
            { src: 'static/images/t2i_images/t2i_3.png', prompt: 'A cute, fluffy Corgi wearing a chef hat, in a professional kitchen, cartoon style.' },
            { src: 'static/images/t2i_images/t2i_4.png', prompt: 'Surreal landscape with floating islands and giant glowing mushrooms, digital art.' },
            { src: 'static/images/t2i_images/t2i_5.png', prompt: 'Close-up portrait of an ancient warrior with intricate face paint, photorealistic.' },
            { src: 'static/images/t2i_images/t2i_6.png', prompt: 'A vibrant coral reef teeming with exotic fish, underwater photography.' },
            { src: 'static/images/t2i_images/t2i_7.png', prompt: 'Steampunk-inspired mechanical owl with glowing eyes, detailed gears and cogs.' },
        ];

        const t2iGrid = document.getElementById('t2i-grid');
        if (t2iGrid) {
            t2iData.forEach(data => {
                const item = document.createElement('div');
                item.className = 't2i-item';
                const img = document.createElement('img');
                img.src = data.src;
                const overlay = document.createElement('div');
                overlay.className = 'prompt-overlay';
                overlay.textContent = data.prompt;
                item.appendChild(img);
                item.appendChild(overlay);
                t2iGrid.appendChild(item);
            });
        }

        function setupInfiniteScroll(containerId, gridId, speed, direction = 'left') {
            const container = document.getElementById(containerId);
            const grid = document.getElementById(gridId);
            if (!container || !grid || !grid.children.length) return;

            const items = Array.from(grid.children);
            const itemWidth = items[0].getBoundingClientRect().width + parseFloat(getComputedStyle(items[0]).marginLeft) * 2;

            // Clone enough items to fill the screen for a seamless loop
            const cloneCount = Math.ceil(window.innerWidth / itemWidth) + 1;
            for(let i = 0; i < cloneCount; i++) {
                 const clone = items[i % items.length].cloneNode(true);
                 if (clone.querySelector('.image-compare')) {
                    initializeComparison(clone.querySelector('.image-compare'));
                }
                grid.appendChild(clone);
            }

            // Re-clone the original set for the main loop logic
             items.forEach(item => {
                const clone = item.cloneNode(true);
                if (clone.querySelector('.image-compare')) {
                    initializeComparison(clone.querySelector('.image-compare'));
                }
                grid.appendChild(clone);
            });


            let scrollX = (direction === 'right') ? (itemWidth * items.length) : 0;
            let isPaused = false;
            let lastTime;

            function animate(currentTime) {
                if(lastTime === undefined) { lastTime = currentTime; }
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;

                if (!isPaused) {
                    const move = speed * (deltaTime / 16.67);
                    scrollX += (direction === 'left' ? move : -move);
                    const scrollLimit = itemWidth * items.length;
                    if (direction === 'left' && scrollX >= scrollLimit) {
                        scrollX -= scrollLimit;
                    } else if (direction === 'right' && scrollX <= 0) {
                        scrollX += scrollLimit;
                    }
                    grid.style.transform = `translateX(-${scrollX}px)`;
                }
                requestAnimationFrame(animate);
            }
            container.addEventListener('mouseenter', () => isPaused = true);
            container.addEventListener('mouseleave', () => isPaused = false);
            requestAnimationFrame(animate);
        }

        function initializeComparison(comparison) {
            const divider = comparison.querySelector('.divider');
            const compareImage = comparison.querySelector('.compare-image');
            let isDragging = false;

            function setPosition(percent) {
                divider.style.left = `${percent}%`;
                compareImage.style.clipPath = `inset(0 ${100 - percent}% 0 0)`;
            }
            setPosition(50);

            const startDrag = (e) => {
                if (e.target.closest('.image-compare') !== comparison) return;
                e.preventDefault();
                isDragging = true;
            };
            const endDrag = () => { isDragging = false; };
            const drag = (e) => {
                if (!isDragging) return;
                const rect = comparison.getBoundingClientRect();
                const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
                const percent = Math.max(0, Math.min(100, (x / rect.width) * 100));
                setPosition(percent);
            };

            comparison.addEventListener('mousedown', startDrag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('mousemove', drag);
            comparison.addEventListener('touchstart', startDrag, { passive: false });
            document.addEventListener('touchend', endDrag);
            document.addEventListener('touchmove', drag, { passive: false });
        }

        document.querySelectorAll('.image-compare').forEach(initializeComparison);

        setupInfiniteScroll('comparison-container', 'comparison-grid', 0.8, 'left');
        setupInfiniteScroll('t2i-container', 't2i-grid', 0.7, 'right');
    });
</script>
</body>
</html>